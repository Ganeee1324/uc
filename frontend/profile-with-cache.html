<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile with Cache - Search Component Test</title>
    <link rel="stylesheet" href="css/profile.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&display=swap" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons&display=swap">
    
    <!-- Load search component first without defer to ensure proper initialization -->
    <script src="components/search-section/search-section-component.js"></script>
</head>
<body data-page="dashboard">
    <div class="main-content">
        <div class="profile-section">
            <h2>Profile with Cache Test</h2>
            <p>Testing search component with profile CSS and performance cache system</p>
            
            <!-- Search Section Component for Documents -->
            <div id="documentsSearchSectionContainer">
                <search-section-component 
                    api-base="https://symbia.it:5000"
                    placeholder-text="Cerca i tuoi documenti..."
                    button-text="Cerca">
                    <!-- Fallback content if component doesn't load -->
                    <div style="padding: 20px; background: #f0f0f0; border: 2px dashed #ccc; text-align: center; color: #666;">
                        <p>‚ö†Ô∏è Web component not loaded</p>
                        <p>Check console for errors</p>
                    </div>
                </search-section-component>
            </div>
        </div>
    </div>

    <!-- Professional Performance & Caching System -->
    <script src="js/config.js" defer></script>
    <script src="js/performance-cache.js" defer></script>
    
    <script>
        // Simple test script
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Profile with Cache Page Loaded');
            
            // Check if the component is defined
            if (customElements.get('search-section-component')) {
                console.log('‚úÖ Search Section Component is defined');
            } else {
                console.error('‚ùå Search Section Component is NOT defined');
            }
            
            // Check for components in the DOM
            const components = document.querySelectorAll('search-section-component');
            console.log(`Found ${components.length} search-section-component instances`);
            
            components.forEach((component, index) => {
                console.log(`Component ${index}:`, component);
                console.log('Component shadow root:', component.shadowRoot);
                console.log('Component attributes:', {
                    apiBase: component.getAttribute('api-base'),
                    placeholderText: component.getAttribute('placeholder-text'),
                    buttonText: component.getAttribute('button-text')
                });
            });
            
            // Check if performance cache is loaded
            setTimeout(() => {
                if (window.performanceCache) {
                    console.log('‚úÖ Performance cache system loaded');
                    console.log('Search component mode:', window.performanceCache.searchComponentMode);
                } else {
                    console.log('‚ùå Performance cache system not loaded');
                }
            }, 500);
        });
        
        // Add error handling for script loading
        window.addEventListener('error', function(e) {
            console.error('‚ùå Script error:', e.error);
            console.error('Error details:', e.filename, e.lineno, e.colno);
        });
    </script>
</body>
</html> 