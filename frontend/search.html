<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uniclarity - File Sharing Platform</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&display=swap" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons&display=swap">
    <link rel="stylesheet" href="css/search.css?v=1.2">
    <!-- Favicon removed for CSP compliance -->
    <!-- Preload background image to eliminate delay -->
    <link rel="preload" href="images/bg.png" as="image" type="image/png">
    <link rel="icon" href="images/favicon.png" type="image/png">
</head>
<body>
    <!-- Background Image Element -->
    <div class="background-image" aria-hidden="true"></div>

    <!-- Header matching the image -->
    <header class="header">
        <a href="search.html" class="logo">
            <img src="images/Logo.png" alt="Uniclarity">
        </a>
        
        <!-- Navigation Menu -->
        <nav class="nav-menu">
            <a href="search.html" class="nav-link">Home</a>
            <a href="#about" class="nav-link">About us</a>
            <a href="#faq" class="nav-link">FAQ</a>
        </nav>
        
        <div class="auth-buttons">
            <div class="divider"></div>
            <a href="upload.html" class="nav-link">Carica</a>
            <div class="user-info">
                <div class="user-avatar" id="userAvatar">
                    <!-- Login button will be inserted here by JavaScript when user is not authenticated -->
                </div>
                <div class="user-dropdown" id="userDropdown">
                    <div class="dropdown-user-info">
                        <div class="dropdown-avatar" id="dropdownAvatar"></div>
                        <div class="dropdown-user-details">
                            <span class="dropdown-user-name" id="dropdownUserName"></span>
                            <span class="dropdown-user-email" id="dropdownUserEmail"></span>
                        </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a href="upload.html" class="dropdown-item">
                        <i class="material-symbols-outlined">upload</i>
                        <span>Upload File</span>
                    </a>
                    <a href="#" class="dropdown-item" id="userFavorites">
                        <i class="material-symbols-outlined">favorite</i>
                        <span>My Favorites</span>
                    </a>
                    <div class="dropdown-divider"></div>
                    <a href="#" class="dropdown-item" id="logoutBtn">
                        <i class="material-symbols-outlined">logout</i>
                        <span>Logout</span>
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content - Centered Search Interface -->
    <main class="main-content" id="mainContent">
        <!-- Search Section with integrated cards -->
        <div class="search-section has-results" id="searchSection">
            <h1 class="search-title">Cerca.</h1>
            <p class="search-subtitle">Pensato per chi vuole di pi√π.</p>
            
            <div class="search-container-wrapper">
                <div class="search-container">
                    <div class="search-bar">
                        <input type="text" class="search-input" id="searchInput" placeholder="Cerca una dispensa...">
                        <input class="toggle-input" id="toggle" name="toggle" type="checkbox" />
                        <label class="toggle-label" for="toggle" id="aiSearchToggle">
                          <div class="cont-icon">
                            <span
                              style="--width: 2; --deg: 25; --duration: 11"
                              class="sparkle"
                            ></span>
                            <span
                              style="--width: 1; --deg: 100; --duration: 18"
                              class="sparkle"
                            ></span>
                            <span
                              style="--width: 1; --deg: 280; --duration: 5"
                              class="sparkle"
                            ></span>
                            <span
                              style="--width: 2; --deg: 200; --duration: 3"
                              class="sparkle"
                            ></span>
                            <span
                              style="--width: 2; --deg: 30; --duration: 20"
                              class="sparkle"
                            ></span>
                            <span
                              style="--width: 2; --deg: 300; --duration: 9"
                              class="sparkle"
                            ></span>
                            <span
                              style="--width: 1; --deg: 250; --duration: 4"
                              class="sparkle"
                            ></span>
                            <span
                              style="--width: 2; --deg: 210; --duration: 8"
                              class="sparkle"
                            ></span>
                            <span
                              style="--width: 2; --deg: 100; --duration: 9"
                              class="sparkle"
                            ></span>
                            <span
                              style="--width: 1; --deg: 15; --duration: 13"
                              class="sparkle"
                            ></span>
                            <span
                              style="--width: 1; --deg: 75; --duration: 18"
                              class="sparkle"
                            ></span>
                            <span style="--width: 2; --deg: 65; --duration: 6" class="sparkle"></span>
                            <span style="--width: 2; --deg: 50; --duration: 7" class="sparkle"></span>
                            <span
                              style="--width: 1; --deg: 320; --duration: 5"
                              class="sparkle"
                            ></span>
                            <span
                              style="--width: 1; --deg: 220; --duration: 5"
                              class="sparkle"
                            ></span>
                            <span
                              style="--width: 1; --deg: 215; --duration: 2"
                              class="sparkle"
                            ></span>
                            <span
                              style="--width: 2; --deg: 135; --duration: 9"
                              class="sparkle"
                            ></span>
                            <span style="--width: 2; --deg: 45; --duration: 4" class="sparkle"></span>
                            <span
                              style="--width: 1; --deg: 78; --duration: 16"
                              class="sparkle"
                            ></span>
                            <span
                              style="--width: 1; --deg: 89; --duration: 19"
                              class="sparkle"
                            ></span>
                            <span
                              style="--width: 2; --deg: 65; --duration: 14"
                              class="sparkle"
                            ></span>
                            <span style="--width: 2; --deg: 97; --duration: 1" class="sparkle"></span>
                            <span
                              style="--width: 1; --deg: 174; --duration: 10"
                              class="sparkle"
                            ></span>
                            <span
                              style="--width: 1; --deg: 236; --duration: 5"
                              class="sparkle"
                            ></span>
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              fill="none"
                              viewBox="0 0 30 30"
                              class="icon"
                            >
                              <path
                                d="M0.96233 28.61C1.36043 29.0081 1.96007 29.1255 2.47555 28.8971L10.4256 25.3552C13.2236 24.11 16.4254 24.1425 19.2107 25.4401L27.4152 29.2747C27.476 29.3044 27.5418 29.3023 27.6047 29.32C27.6563 29.3348 27.7079 29.3497 27.761 29.3574C27.843 29.3687 27.9194 29.3758 28 29.3688C28.1273 29.3617 28.2531 29.3405 28.3726 29.2945C28.4447 29.262 28.5162 29.2287 28.5749 29.1842C28.6399 29.1446 28.6993 29.0994 28.7509 29.0477L28.9008 28.8582C28.9468 28.7995 28.9793 28.7274 29.0112 28.656C29.0599 28.5322 29.0811 28.4036 29.0882 28.2734C29.0939 28.1957 29.0868 28.1207 29.0769 28.0415C29.0705 27.9955 29.0585 27.9524 29.0472 27.9072C29.0295 27.8343 29.0302 27.7601 28.9984 27.6901L25.1638 19.4855C23.8592 16.7073 23.8273 13.5048 25.0726 10.7068L28.6145 2.75679C28.8429 2.24131 28.7318 1.63531 28.3337 1.2372C27.9165 0.820011 27.271 0.721743 26.7491 0.9961L19.8357 4.59596C16.8418 6.15442 13.2879 6.18696 10.2615 4.70062L1.80308 0.520214C1.7055 0.474959 1.60722 0.441742 1.50964 0.421943C1.44459 0.409215 1.37882 0.395769 1.3074 0.402133C1.14406 0.395769 0.981436 0.428275 0.818095 0.499692C0.77284 0.519491 0.719805 0.545671 0.67455 0.578198C0.596061 0.617088 0.524653 0.675786 0.4596 0.74084C0.394546 0.805894 0.335843 0.877306 0.296245 0.956502C0.263718 1.00176 0.237561 1.05477 0.217762 1.10003C0.152708 1.24286 0.126545 1.40058 0.120181 1.54978C0.120181 1.61483 0.126527 1.6735 0.132891 1.73219C0.15269 1.85664 0.178881 1.97332 0.237571 2.08434L4.41798 10.5427C5.91139 13.5621 5.8725 17.1238 4.3204 20.1099L0.720514 27.0233C0.440499 27.5536 0.545137 28.1928 0.96233 28.61Z"
                              ></path>
                            </svg>
                          </div>
                        </label>
                    </div>
                    <button class="filters-btn" id="filtersBtn">
                        <i class="material-symbols-outlined">tune</i>
                        <span class="filter-count" id="filterCount">0</span>
                    </button>

                </div>
            </div>
            
            <!-- Document Count and Active Filters Display -->
            <div id="documentCountContainer" class="document-count-container" style="display: block;">
                <div class="document-count-and-filters">
                    <span id="documentCount" class="document-count">Caricamento...</span>
                    <div id="activeFiltersDisplay" class="active-filters-display">
                        <!-- Active filter pills will be dynamically added here -->
                    </div>
                </div>
            </div>

            <!-- Documents Grid - Will be populated dynamically -->
            <div class="documents-grid" id="documentsGrid">
                <!-- Initial loading cards to prevent layout shift -->
                <div class="document-card loading-card">
                    <div class="document-preview loading-preview">
                        <div class="skeleton-preview-circle"></div>
                        <div class="skeleton-rating-badge"></div>
                        <div class="skeleton-preview-bar"></div>
                    </div>
                    <div class="skeleton-favorite-button"></div>
                    <div class="document-content">
                        <div class="document-header">
                            <div class="document-title-section">
                                <div class="skeleton-title"></div>
                                <div class="skeleton-author"></div>
                            </div>
                        </div>
                        <div class="document-info">
                            <div class="skeleton-line info-item"></div>
                            <div class="skeleton-line info-item"></div>
                            <div class="skeleton-line info-item"></div>
                            <div class="skeleton-line info-item"></div>
                        </div>
                        <div class="document-footer">
                            <div class="skeleton-footer-left">
                                <div class="skeleton-avatar"></div>
                                <div class="skeleton-meta"></div>
                            </div>
                            <div class="skeleton-price"></div>
                        </div>
                    </div>
                </div>
                <div class="document-card loading-card">
                    <div class="document-preview loading-preview">
                        <div class="skeleton-preview-circle"></div>
                        <div class="skeleton-rating-badge"></div>
                        <div class="skeleton-preview-bar"></div>
                    </div>
                    <div class="skeleton-favorite-button"></div>
                    <div class="document-content">
                        <div class="document-header">
                            <div class="document-title-section">
                                <div class="skeleton-title"></div>
                                <div class="skeleton-author"></div>
                            </div>
                        </div>
                        <div class="document-info">
                            <div class="skeleton-line info-item"></div>
                            <div class="skeleton-line info-item"></div>
                            <div class="skeleton-line info-item"></div>
                            <div class="skeleton-line info-item"></div>
                        </div>
                        <div class="document-footer">
                            <div class="skeleton-footer-left">
                                <div class="skeleton-avatar"></div>
                                <div class="skeleton-meta"></div>
                            </div>
                            <div class="skeleton-price"></div>
                        </div>
                    </div>
                </div>
                <div class="document-card loading-card">
                    <div class="document-preview loading-preview">
                        <div class="skeleton-preview-circle"></div>
                        <div class="skeleton-rating-badge"></div>
                        <div class="skeleton-preview-bar"></div>
                    </div>
                    <div class="skeleton-favorite-button"></div>
                    <div class="document-content">
                        <div class="document-header">
                            <div class="document-title-section">
                                <div class="skeleton-title"></div>
                                <div class="skeleton-author"></div>
                            </div>
                        </div>
                        <div class="document-info">
                            <div class="skeleton-line info-item"></div>
                            <div class="skeleton-line info-item"></div>
                            <div class="skeleton-line info-item"></div>
                            <div class="skeleton-line info-item"></div>
                        </div>
                        <div class="document-footer">
                            <div class="skeleton-footer-left">
                                <div class="skeleton-avatar"></div>
                                <div class="skeleton-meta"></div>
                            </div>
                            <div class="skeleton-price"></div>
                        </div>
                    </div>
                </div>
                <div class="document-card loading-card">
                    <div class="document-preview loading-preview">
                        <div class="skeleton-preview-circle"></div>
                        <div class="skeleton-rating-badge"></div>
                        <div class="skeleton-preview-bar"></div>
                    </div>
                    <div class="skeleton-favorite-button"></div>
                    <div class="document-content">
                        <div class="document-header">
                            <div class="document-title-section">
                                <div class="skeleton-title"></div>
                                <div class="skeleton-author"></div>
                            </div>
                        </div>
                        <div class="document-info">
                            <div class="skeleton-line info-item"></div>
                            <div class="skeleton-line info-item"></div>
                            <div class="skeleton-line info-item"></div>
                            <div class="skeleton-line info-item"></div>
                        </div>
                        <div class="document-footer">
                            <div class="skeleton-footer-left">
                                <div class="skeleton-avatar"></div>
                                <div class="skeleton-meta"></div>
                            </div>
                            <div class="skeleton-price"></div>
                        </div>
                    </div>
                </div>
                <div class="document-card loading-card">
                    <div class="document-preview loading-preview">
                        <div class="skeleton-preview-circle"></div>
                        <div class="skeleton-rating-badge"></div>
                        <div class="skeleton-preview-bar"></div>
                    </div>
                    <div class="skeleton-favorite-button"></div>
                    <div class="document-content">
                        <div class="document-header">
                            <div class="document-title-section">
                                <div class="skeleton-title"></div>
                                <div class="skeleton-author"></div>
                            </div>
                        </div>
                        <div class="document-info">
                            <div class="skeleton-line info-item"></div>
                            <div class="skeleton-line info-item"></div>
                            <div class="skeleton-line info-item"></div>
                            <div class="skeleton-line info-item"></div>
                        </div>
                        <div class="document-footer">
                            <div class="skeleton-footer-left">
                                <div class="skeleton-avatar"></div>
                                <div class="skeleton-meta"></div>
                            </div>
                            <div class="skeleton-price"></div>
                        </div>
                    </div>
                </div>
                <div class="document-card loading-card">
                    <div class="document-preview loading-preview">
                        <div class="skeleton-preview-circle"></div>
                        <div class="skeleton-rating-badge"></div>
                        <div class="skeleton-preview-bar"></div>
                    </div>
                    <div class="skeleton-favorite-button"></div>
                    <div class="document-content">
                        <div class="document-header">
                            <div class="document-title-section">
                                <div class="skeleton-title"></div>
                                <div class="skeleton-author"></div>
                            </div>
                        </div>
                        <div class="document-info">
                            <div class="skeleton-line info-item"></div>
                            <div class="skeleton-line info-item"></div>
                            <div class="skeleton-line info-item"></div>
                            <div class="skeleton-line info-item"></div>
                        </div>
                        <div class="document-footer">
                            <div class="skeleton-footer-left">
                                <div class="skeleton-avatar"></div>
                                <div class="skeleton-meta"></div>
                            </div>
                            <div class="skeleton-price"></div>
                        </div>
                    </div>
                </div>
                <div class="document-card loading-card">
                    <div class="document-preview loading-preview">
                        <div class="skeleton-preview-circle"></div>
                        <div class="skeleton-rating-badge"></div>
                        <div class="skeleton-preview-bar"></div>
                    </div>
                    <div class="skeleton-favorite-button"></div>
                    <div class="document-content">
                        <div class="document-header">
                            <div class="document-title-section">
                                <div class="skeleton-title"></div>
                                <div class="skeleton-author"></div>
                            </div>
                        </div>
                        <div class="document-info">
                            <div class="skeleton-line info-item"></div>
                            <div class="skeleton-line info-item"></div>
                            <div class="skeleton-line info-item"></div>
                            <div class="skeleton-line info-item"></div>
                        </div>
                        <div class="document-footer">
                            <div class="skeleton-footer-left">
                                <div class="skeleton-avatar"></div>
                                <div class="skeleton-meta"></div>
                            </div>
                            <div class="skeleton-price"></div>
                        </div>
                    </div>
                </div>
                <div class="document-card loading-card">
                    <div class="document-preview loading-preview">
                        <div class="skeleton-preview-circle"></div>
                        <div class="skeleton-rating-badge"></div>
                        <div class="skeleton-preview-bar"></div>
                    </div>
                    <div class="skeleton-favorite-button"></div>
                    <div class="document-content">
                        <div class="document-header">
                            <div class="document-title-section">
                                <div class="skeleton-title"></div>
                                <div class="skeleton-author"></div>
                            </div>
                        </div>
                        <div class="document-info">
                            <div class="skeleton-line info-item"></div>
                            <div class="skeleton-line info-item"></div>
                            <div class="skeleton-line info-item"></div>
                            <div class="skeleton-line info-item"></div>
                        </div>
                        <div class="document-footer">
                            <div class="skeleton-footer-left">
                                <div class="skeleton-avatar"></div>
                                <div class="skeleton-meta"></div>
                            </div>
                            <div class="skeleton-price"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Advanced Filters Panel (moved outside main for proper fixed positioning) -->
    <div class="filters-panel" id="filtersPanel">
        <div class="filters-content">
            <div class="filters-header">
                <div class="filters-title">
                    <h2>üéØ Filtri</h2>
                    <span class="filters-subtitle">Trova esattamente quello che cerchi</span>
                </div>
                <div class="filters-actions">
                    <button class="filter-clear-btn" id="clearAllFilters">
                        <i class="material-symbols-outlined">clear_all</i>
                        Reset
                    </button>
                    <button class="filters-close" id="filtersClose">
                        <i class="material-symbols-outlined">close</i>
                    </button>
                </div>
            </div>

            <div class="filters-grid">
                <!-- Academic Context Section -->
                <div class="filter-section">
                    <h3 class="filter-section-title">
                        <i class="material-symbols-outlined">school</i>
                        Contesto Accademico
                    </h3>
                    <div class="filter-group">
                        <div class="filter-item">
                            <label for="facultyFilter" class="filter-label">Facolt√†</label>
                            <div class="dropdown-container" data-dropdown="faculty">
                                <div class="dropdown-input-wrapper">
                                    <input type="text" id="facultyFilter" class="dropdown-input" placeholder="Scrivi o scegli una facolt√†...">
                                    <i class="material-symbols-outlined dropdown-arrow">expand_more</i>
                                </div>
                                <div class="dropdown-content" id="facultyDropdown">
                                    <div class="dropdown-options" id="facultyOptions"></div>
                                </div>
                            </div>
                        </div>
                        <div class="filter-item">
                            <label for="courseFilter" class="filter-label">Corso</label>
                            <div class="dropdown-container" data-dropdown="course">
                                <div class="dropdown-input-wrapper">
                                    <input type="text" id="courseFilter" class="dropdown-input" placeholder="Scrivi o scegli un corso...">
                                    <i class="material-symbols-outlined dropdown-arrow">expand_more</i>
                                </div>
                                <div class="dropdown-content" id="courseDropdown">
                                    <div class="dropdown-options" id="courseOptions"></div>
                                </div>
                            </div>
                        </div>
                        <div class="filter-item">
                            <label for="canaleFilter" class="filter-label">Canale</label>
                            <div class="dropdown-container" data-dropdown="canale">
                                <div class="dropdown-input-wrapper">
                                    <input type="text" id="canaleFilter" class="dropdown-input" placeholder="Scrivi o scegli un canale...">
                                    <i class="material-symbols-outlined dropdown-arrow">expand_more</i>
                                </div>
                                <div class="dropdown-content" id="canaleDropdown">
                                    <div class="dropdown-options" id="canaleOptions"></div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

                <!-- Document Properties Section -->
                <div class="filter-section">
                    <h3 class="filter-section-title">
                        <i class="material-symbols-outlined">description</i>
                        Tipologia Documento
                    </h3>
                    <div class="filter-group">
                        <div class="filter-item">
                            <label for="tagFilter" class="filter-label">Tipo Documento</label>
                            <div class="dropdown-container" data-dropdown="tag">
                                <div class="dropdown-input-wrapper">
                                    <input type="text" id="tagFilter" class="dropdown-input" placeholder="Tutti i tipi" readonly>
                                    <i class="material-symbols-outlined dropdown-arrow">expand_more</i>
                                </div>
                                <div class="dropdown-content" id="tagDropdown">
                                    <div class="dropdown-options" id="tagOptions"></div>
                                </div>
                            </div>
                        </div>
                        <div class="filter-item">
                            <label for="documentTypeFilter" class="filter-label">Formato file</label>
                            <div class="dropdown-container" data-dropdown="documentType">
                                <div class="dropdown-input-wrapper">
                                    <input type="text" id="documentTypeFilter" class="dropdown-input" placeholder="Tutti i formati" readonly>
                                    <i class="material-symbols-outlined dropdown-arrow">expand_more</i>
                                </div>
                                <div class="dropdown-content" id="documentTypeDropdown">
                                    <div class="dropdown-options" id="documentTypeOptions"></div>
                                </div>
                            </div>
                        </div>
                        <div class="filter-item">
                            <label for="languageFilter" class="filter-label">Lingua</label>
                            <div class="dropdown-container" data-dropdown="language">
                                <div class="dropdown-input-wrapper">
                                    <input type="text" id="languageFilter" class="dropdown-input" placeholder="Tutte le lingue" readonly>
                                    <i class="material-symbols-outlined dropdown-arrow">expand_more</i>
                                </div>
                                <div class="dropdown-content" id="languageDropdown">
                                    <div class="dropdown-options" id="languageOptions"></div>
                                </div>
                            </div>
                        </div>
                        <div class="filter-item">
                            <label class="filter-label">Tipo Vetrina</label>
                            <div class="vetrina-toggle-group">
                                <button class="vetrina-toggle active" data-vetrina="all">
                                    <i class="material-symbols-outlined">select_all</i>
                                    Tutte
                                </button>
                                <button class="vetrina-toggle" data-vetrina="single">
                                    <i class="material-symbols-outlined">description</i>
                                    Singolo File
                                </button>
                                <button class="vetrina-toggle" data-vetrina="multiple">
                                    <i class="material-symbols-outlined">folder</i>
                                    Pacchetti
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Academic Period Section -->
                <div class="filter-section">
                    <h3 class="filter-section-title">
                        <i class="material-symbols-outlined">calendar_month</i>
                        Periodo Accademico
                    </h3>
                    <div class="filter-group">
                        <div class="filter-item">
                            <label for="academicYearFilter" class="filter-label">Anno Accademico</label>
                            <div class="dropdown-container" data-dropdown="academicYear">
                                <div class="dropdown-input-wrapper">
                                    <input type="text" id="academicYearFilter" class="dropdown-input" placeholder="Tutti gli anni" readonly>
                                    <i class="material-symbols-outlined dropdown-arrow">expand_more</i>
                                </div>
                                <div class="dropdown-content" id="academicYearDropdown">
                                    <div class="dropdown-options" id="academicYearOptions"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quality & Engagement Section -->
                <div class="filter-section">
                    <h3 class="filter-section-title">
                        <i class="material-symbols-outlined">star</i>
                        Qualit√† & Engagement
                    </h3>
                    <div class="filter-group">
                        <div class="filter-item">
                            <label class="filter-label">Rating Minimo</label>
                            <div class="rating-filter">
                                <div class="rating-stars-filter" id="ratingFilter">
                                    <span class="rating-star-filter" data-rating="1">‚òÖ</span>
                                    <span class="rating-star-filter" data-rating="2">‚òÖ</span>
                                    <span class="rating-star-filter" data-rating="3">‚òÖ</span>
                                    <span class="rating-star-filter" data-rating="4">‚òÖ</span>
                                    <span class="rating-star-filter" data-rating="5">‚òÖ</span>
                                </div>
                                <span class="rating-text" id="ratingText">Qualsiasi rating</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Price & Availability Section -->
                <div class="filter-section">
                    <h3 class="filter-section-title">
                        <i class="material-symbols-outlined">payments</i>
                        Prezzo & Disponibilit√†
                    </h3>
                    <div class="filter-group">
                        <div class="filter-item">
                            <label class="filter-label">Prezzo</label>
                            <div class="price-toggle-group">
                                <button class="price-toggle active" data-price="all">
                                    <i class="material-symbols-outlined">select_all</i>
                                    Tutti
                                </button>
                                <button class="price-toggle" data-price="free">
                                    <i class="material-symbols-outlined">volunteer_activism</i>
                                    Gratis
                                </button>
                                <button class="price-toggle" data-price="paid">
                                    <i class="material-symbols-outlined">paid</i>
                                    A Pagamento
                                </button>
                            </div>
                        </div>
                        <div class="filter-item" id="priceRangeContainer">
                            <label class="filter-label">Range di Prezzo (‚Ç¨)</label>
                            <div class="price-range-filter">
                                <div class="dual-range-container">
                                    <div class="range-track">
                                        <div class="range-fill" id="rangeFill"></div>
                                    </div>
                                    <input type="range" id="minPriceRange" class="range-slider range-slider-min" min="0" max="100" value="0" step="0.5">
                                    <input type="range" id="maxPriceRange" class="range-slider range-slider-max" min="0" max="100" value="100" step="0.5">
                                </div>
                                <div class="price-values">
                                    <span id="minPriceValue">‚Ç¨0</span>
                                    <span id="maxPriceValue">‚Ç¨100</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- File Properties Section -->
                <div class="filter-section">
                    <h3 class="filter-section-title">
                        <i class="material-symbols-outlined">folder</i>
                        Propriet√† File
                    </h3>
                    <div class="filter-group">
                        <div class="filter-item">
                            <label class="filter-label">Dimensione File</label>
                            <div class="size-toggle-group">
                                <button class="size-toggle active" data-size="all">Tutte</button>
                                <button class="size-toggle" data-size="small">< 5MB</button>
                                <button class="size-toggle" data-size="medium">5-20MB</button>
                                <button class="size-toggle" data-size="large">> 20MB</button>
                            </div>
                        </div>
                        <div class="filter-item">
                            <label class="filter-label">Data di Pubblicazione</label>
                            <div class="time-toggle-group">
                                <button class="time-toggle active" data-time="all">Sempre</button>
                                <button class="time-toggle" data-time="week">Ultima settimana</button>
                                <button class="time-toggle" data-time="month">Ultimo mese</button>
                                <button class="time-toggle" data-time="year">Ultimo anno</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Filters Overlay -->
    <div class="filters-overlay" id="filtersOverlay"></div>

    <!-- Preview Modal -->
    <div id="previewModal" class="preview-modal">
        <div class="preview-content">
            <div class="preview-header">
                <h2 class="preview-title" id="previewTitle">Document Preview</h2>
                <button class="preview-close" id="previewCloseBtn">√ó</button>
            </div>
            <div id="previewBody" class="preview-body">
                <!-- Preview content will be loaded here -->
            </div>
            <div id="previewActions" class="preview-actions">
                <!-- Action buttons will be added here -->
            </div>
        </div>
    </div>

    <!-- Scroll to Top Button -->
    <button class="scroll-to-top-btn" id="scrollToTopBtn" aria-label="Scroll to top of page">
        <i class="material-symbols-outlined">keyboard_arrow_up</i>
    </button>

    <!-- Reviews Overlay -->
    <div class="reviews-overlay" id="reviewsOverlay">
        <div class="reviews-overlay-content">
            <div class="reviews-overlay-header">
                <h2>
                    <span class="material-symbols-outlined">rate_review</span>
                    Recensioni
                </h2>
                <button class="close-overlay-btn" data-action="close-reviews">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            
            <div class="reviews-overlay-body">
                <div class="reviews-summary">
                    <div class="overall-rating">
                        <div class="rating-display">
                            <div class="big-stars"></div>
                            <span class="big-rating-score">0.0</span>
                        </div>
                        <span class="total-reviews">Basato su 0 recensioni</span>
                    </div>
                    <button class="add-review-btn" data-action="show-review-form">
                        <span class="material-symbols-outlined">add</span>
                        Aggiungi Recensione
                    </button>
                </div>
                
                <div class="reviews-list" id="reviewsList">
                    <!-- Reviews will be populated here -->
                </div>
                
                <div class="add-review-form" id="addReviewForm" style="display: none;">
                    <h3>Aggiungi la tua recensione</h3>
                    <div class="rating-input">
                        <label>Valutazione:</label>
                        <div class="star-rating">
                            <span class="star-input" data-rating="1">‚òÖ</span>
                            <span class="star-input" data-rating="2">‚òÖ</span>
                            <span class="star-input" data-rating="3">‚òÖ</span>
                            <span class="star-input" data-rating="4">‚òÖ</span>
                            <span class="star-input" data-rating="5">‚òÖ</span>
                        </div>
                    </div>
                    <div class="review-text-input">
                        <label for="reviewComment">Commento:</label>
                        <textarea id="reviewComment" placeholder="Condividi la tua esperienza con questo documento..." rows="4"></textarea>
                    </div>
                    <div class="review-form-actions">
                        <button class="cancel-review-btn" data-action="hide-review-form">Annulla</button>
                        <button class="submit-review-btn" data-action="submit-review">Invia Recensione</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/config.js"></script>
    <script src="js/search.js"></script>
    
</body>
</html>